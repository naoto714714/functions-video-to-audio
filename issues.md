# 動画ファイルを音声ファイルに変換するCloud Run関数のタスク一覧

## Issue 1: プロジェクト構成の初期化

### 概要
- プロジェクトの基本的なディレクトリ構造と必要なファイルを作成する

### 詳細
- 要件定義書に従ったディレクトリ構造を作成する
- main.py, requirements.txt, README.mdの初期ファイルを作成する
- Pythonの仮想環境のセットアップ方法をドキュメント化する

### 完了条件
- プロジェクトのディレクトリ構造が作成されている
- 必要な初期ファイルが作成されている
- README.mdにプロジェクトの概要とセットアップ方法が記載されている

## Issue 2: Cloud Run関数のセットアップ

### 概要
- Cloud Run関数の基本構造を実装する

### 詳細
- Cloud Runのエントリーポイントとなる関数を実装する
- Google Cloud Storageのイベントをトリガーとする設定を行う
- 必要なGCPのライブラリをrequirements.txtに追加する

### 完了条件
- Cloud Run関数のエントリーポイントが実装されている
- Google Cloud Storageのイベントをトリガーとする設定が実装されている
- 関数が正しく起動することが確認できる

## Issue 3: Google Cloud Storageのイベント検知機能の実装

### 概要
- `gs://im-naoto-test-bucket/inputs` へのファイルアップロードを検知する機能を実装する

### 詳細
- Cloud Storageのイベント通知を受け取る処理を実装する
- アップロードされたファイルの情報を取得する処理を実装する
- ファイルが動画ファイルかどうかを検証する機能を実装する

### 完了条件
- Cloud Storageのイベント通知を正しく受け取れる
- アップロードされたファイルの情報（パス、ファイル名、MIME タイプなど）を取得できる
- 動画ファイル以外の場合は処理をスキップする機能が実装されている

## Issue 4: 動画ファイルから音声ファイルへの変換機能の実装

### 概要
- 動画ファイルから音声を抽出し、音声ファイルとして保存する機能を実装する

### 詳細
- 動画ファイルからの音声抽出処理を実装する
- 抽出した音声を適切なフォーマット（MP3など）で保存する処理を実装する
- `gs://im-naoto-test-bucket/outputs` に出力する機能を実装する

### 完了条件
- 動画ファイルから音声を正しく抽出できる
- 抽出した音声を指定のフォーマットで保存できる
- 出力ファイルが `gs://im-naoto-test-bucket/outputs` に正しく保存される

## Issue 5: 処理後の入力ファイル削除機能の実装

### 概要
- 音声変換処理完了後に入力の動画ファイルを削除する機能を実装する

### 詳細
- 処理が成功した場合に入力動画ファイルを削除する処理を実装する
- 処理失敗時のエラーハンドリングを実装する
- 削除処理の成功・失敗をログに記録する機能を実装する

### 完了条件
- 変換処理成功後に入力ファイルが正しく削除される
- エラー発生時に適切なエラーハンドリングができる
- 処理結果がログに正しく記録される

## Issue 6: テストとデプロイ

### 概要
- 実装した機能のテストとGCPへのデプロイを行う

### 詳細
- ローカル環境でのテスト方法を実装する
- GCPへのデプロイ手順をドキュメント化する
- デプロイ後の動作確認手順を作成する

### 完了条件
- ローカル環境でテストが実行でき、機能が正しく動作することが確認できる
- GCPへのデプロイが成功する
- デプロイ後、実際のCloud Storage環境で動作することが確認できる
